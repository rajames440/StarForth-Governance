= StarForth Governance Reference Manual
Robert A. James <rajames440@gmail.com>
v1.0, October 30, 2025
:toc:
:toclevels: 3
:numbered:
:imagesdir: images
:experimental:

== DOCUMENT STATUS & SESSION CHECKPOINT

[IMPORTANT]
====
**Current Session Status:** IN PROGRESS

**Last Updated:** October 30, 2025 (Session Start)

**Session Checkpoint:**
- [x] Master reference manual structure created
- [ ] All chapters drafted
- [ ] All chapters completed and linked
- [ ] Cross-references validated
- [ ] Ready for governance bundle

**NEXT UP:** Create ECR_PROCESS.adoc chapter (Engineering Change Request process)

====

== Overview

StarForth implements a formal governance system for managing changes to the codebase through two primary processes:

. **ECR → ECO Process** (Engineering Change Request → Engineering Change Order)
  - For NEW features, enhancements, refactoring
  - PM-driven approval gate
  - Optional theory file (*.thy) or documented justification required
  - Prevents modifications to existing verified code

. **CAPA Process** (Corrective/Preventive Action)
  - For DEFECTS discovered during implementation
  - QA-driven validation gate
  - QA decides if FMEA (Failure Mode & Effects Analysis) required
  - All items tracked with unique IDs and cross-references

**Design Philosophy:** Keep verification and validation current WITH development. No technical debt accumulation. Everything formally justified before entering backlog.

---

== Document Structure & Status Matrix

.Chapter Status Overview
[%header,cols="1,2,1,3"]
|===
| Chapter | Title | Status | Notes

| 1.0 | ECR Process | [ ] TODO | Next to create - Engineering Change Request submission & PM review
| 2.0 | ECO Process | [ ] TODO | PM approval gate, ECO generation, backlog entry
| 3.0 | CAPA Process | [ ] TODO | Defect tracking, QA validation, approval chains
| 4.0 | FMEA Process | [ ] TODO | Formal failure mode analysis, when required
| 5.0 | Cross-Reference Guide | [ ] TODO | How ECR/ECO/CAPA/FMEA/thy files link together
| 6.0 | Signatory Matrix | [ ] TODO | Who approves what, approval chains, esig requirements
| 7.0 | PM Checklist Template | [ ] TODO | PM review criteria for ECR approval/rejection
| 8.0 | QA Checklist Template | [ ] TODO | QA FMEA decision criteria
| 9.0 | Theory Justification Guide | [ ] TODO | When *.thy required vs. optional, what justification means
|===

---

== ID NUMBERING SYSTEM

All controlled documents use hierarchical numbering:

[source]
----
ECR-YYYY-###      Engineering Change Request
                  Example: ECR-2025-001, ECR-2025-042

ECO-YYYY-###      Engineering Change Order (created from ECR)
                  Example: ECO-2025-001 (created from ECR-2025-001)

FMEA-YYYY-###     Failure Mode & Effects Analysis (created if needed by QA)
                  Example: FMEA-2025-001 (associated with CAPA-2025-001)

CAPA-YYYY-###     Corrective/Preventive Action (GitHub issue #123)
                  Example: CAPA-2025-001 (GitHub issue #1)

thy_filename.thy  Theory file (Isabelle/HOL)
                  Example: vm_new_feature.thy, vm_arithmetic_fix.thy
----

**Cross-Reference Example:**
[source]
----
ECR-2025-042 (Add new MYWORD)
  → ECO-2025-015 (approved ECO, added to backlog)
  → Implementation PR (references CAPA-#123)
  → CAPA-2025-042 (discovered memory leak during testing)
  → FMEA-2025-001 (QA required FMEA for critical fix)
  → vm_myword_memory_fix.thy (theory file for verification)
----

---

== CHAPTER 1: ECR PROCESS
**Status:** [ ] TODO +
**Priority:** NEXT UP +
**Owner:** Robert A. James (PM)

.What this chapter covers:
- ECR definition and purpose
- ECR form template (GitHub issue form)
- ECR submission workflow
- Required fields:
  * Theory file (*.thy) or documented justification
  * Design inputs/outputs
  * Justification
  * Scope/impact analysis
- ECR tracking and PM assignment

.Tasks:
- [ ] Define ECR form template (YAML GitHub issue form)
- [ ] Document submission workflow
- [ ] Create ECR form example
- [ ] Link to ECO_PROCESS.adoc (next step)

.Dependencies:
- None (entry point)

.Output:
- `docs/src/governance/chapters/01-ecr-process.adoc`
- GitHub issue form template in `.github/ISSUE_TEMPLATE/ecr.yml`

---

== CHAPTER 2: ECO PROCESS
**Status:** [ ] TODO +
**Priority:** After ECR_PROCESS +
**Owner:** Robert A. James (PM)

.What this chapter covers:
- ECO definition and purpose
- PM review gate workflow
- PM approval checklist (TBD)
- PM rejection criteria
- ECO creation and ID assignment (ECO-YYYY-###)
- Backlog entry workflow
- PM decision: FMEA required or not?

.Key Sections:
- PM Checklist (template provided in Chapter 7)
- Rejection reasons and communication
- ECO metadata (version, priority, links to ECR)
- Cross-reference setup (ECO → ECR)

.Tasks:
- [ ] Define PM checklist items (scope, resources, feasibility, alignment, etc.)
- [ ] Document approval workflow
- [ ] Document rejection workflow
- [ ] Define FMEA decision logic
- [ ] Create example ECO with cross-references

.Dependencies:
- Chapter 1: ECR_PROCESS
- Chapter 7: PM_CHECKLIST_TEMPLATE

.Output:
- `docs/src/governance/chapters/02-eco-process.adoc`

---

== CHAPTER 3: CAPA PROCESS
**Status:** [ ] TODO +
**Priority:** After ECO_PROCESS +
**Owner:** Robert A. James (PM/QA)

.What this chapter covers:
- CAPA definition (Corrective/Preventive Action for defects)
- When CAPA is created (during implementation)
- CAPA types (bug fix, security patch, regression)
- CAPA creation workflow (GitHub issue #123)
- Implementation via PR (references CAPA)
- QA validation gate (different from ECR/ECO)
- **QA DECISION POINT: Is FMEA needed?**
- Three closure types:
  * Auto (docs/tests only, skip to PM)
  * QA Manual (feature/fix, QA validates → PM approves)
  * Security/Critical (may bypass QA, PM direct)

.Key Sections:
- CAPA vs ECR/ECO (different gates)
- Developer workflow (create CAPA, implement, PR)
- QA checklist for FMEA decision (Chapter 8)
- PM approval workflow
- Audit trail (GitHub issue, commits, tags, Jenkins logs)

.Tasks:
- [ ] Update CAPA_PROCESS.md content to AsciiDoc format
- [ ] Clarify CAPA vs ECR/ECO distinction
- [ ] Document QA FMEA decision gate
- [ ] Create CAPA examples (doc change, feature, bug fix)
- [ ] Link to FMEA_PROCESS (conditional)

.Dependencies:
- Chapter 2: ECO_PROCESS (context)
- Chapter 4: FMEA_PROCESS (conditional)
- Chapter 8: QA_CHECKLIST_TEMPLATE

.Output:
- `docs/src/governance/chapters/03-capa-process.adoc`

---

== CHAPTER 4: FMEA PROCESS
**Status:** [ ] TODO +
**Priority:** After CAPA_PROCESS +
**Owner:** Robert A. James (QA/PM)

.What this chapter covers:
- FMEA definition (Failure Mode & Effects Analysis)
- When FMEA is required:
  * ECO: Optional (PM decides, rare)
  * CAPA: QA decides based on risk checklist (Chapter 8)
- FMEA process (formal, documented)
- FMEA template structure
- FMEA sign-off authority (PM and/or QA team)
- FMEA ID assignment (FMEA-YYYY-###)
- Documentation and archival

.Key Sections:
- FMEA trigger decision logic
- FMEA standard table (Failure Mode, Severity, Occurrence, Detection, RPN)
- Risk mitigation plans
- Sign-off requirements
- Archive location (controlled documents)

.Tasks:
- [ ] Define FMEA template (standard FMEA table)
- [ ] Document when required (QA checklist in Chapter 8)
- [ ] Create FMEA example
- [ ] Define sign-off process
- [ ] Link to SIGNATORY_MATRIX (Chapter 6)

.Dependencies:
- Chapter 3: CAPA_PROCESS (conditional trigger)
- Chapter 6: SIGNATORY_MATRIX (approval authority)
- Chapter 8: QA_CHECKLIST_TEMPLATE (decision criteria)

.Output:
- `docs/src/governance/chapters/04-fmea-process.adoc`

---

== CHAPTER 5: CROSS-REFERENCE GUIDE
**Status:** [ ] TODO +
**Priority:** After Chapter 4 +
**Owner:** Robert A. James (PM/Documentation)

.What this chapter covers:
- How ECR/ECO/CAPA/FMEA/thy files are linked
- GitHub issue linking (ECR issue → ECO metadata → CAPA issue)
- Git commit references (CAPA-#123, ECR-2025-042)
- Git tag naming (v2.0.1 = released to master)
- Jenkins logs (validation & release timestamps)
- Documentation registry (where controlled docs live)
- Cross-reference examples with real scenario

.Key Sections:
- ID hierarchy and linkage
- GitHub issue templates and cross-referencing
- Git commit message format with IDs
- Documentation location structure
- Registry format (CSV or database)
- Traceability matrix (ECR → implementation → validation)

.Tasks:
- [ ] Define cross-reference format
- [ ] Create registry template
- [ ] Document GitHub linking pattern
- [ ] Create end-to-end example (ECR-42 → ECO-15 → CAPA-42 → FMEA-8 → thy file → v2.0.1)
- [ ] Explain how to query relationships

.Dependencies:
- All previous chapters (context)

.Output:
- `docs/src/governance/chapters/05-cross-reference-guide.adoc`
- Registry template (CSV or YAML)

---

== CHAPTER 6: SIGNATORY MATRIX
**Status:** [ ] TODO +
**Priority:** After Chapter 5 +
**Owner:** Robert A. James (PM)

.What this chapter covers:
- Who approves/signs what
- Multi-signatory approval chains
- Electronic signature (esig) requirements
- Current roles (PM, QA, Developer)
- Future roles (Engineering Manager, QA Team, etc.)
- Minimum requirement: **PM esig on all controlled documents**

.Approval Matrix:
[%header,cols="1,2,2,2"]
|===
| Document Type | Signatories | Authority | Status

| ECR | Originator, PM | PM final | [ ] TBD
| ECO | PM | PM only | [ ] TBD
| CAPA | Developer, QA, PM | PM final | [ ] TBD
| FMEA | QA, PM | PM final | [ ] TBD
| thy file | Developer, PM | PM final | [ ] TBD
| Release Tag | PM | PM only | [ ] TBD
|===

.Key Sections:
- Current signatory roles and responsibilities
- ECR approval chain (originator + PM, future: +EM, +QA?)
- ECO approval (PM only)
- CAPA approval (QA validates, PM approves)
- FMEA approval (PM final authority)
- esig mechanism (TBD - shell script later)
- PM as minimum signatory on everything going to governance repo

.Tasks:
- [ ] Define signatory roles and authority
- [ ] Create approval matrix table
- [ ] Document future role integration (EM, QA team)
- [ ] Define esig workflow (deferred for shell script discussion)
- [ ] Create approval documentation template

.Dependencies:
- All previous chapters (context)

.Output:
- `docs/src/governance/chapters/06-signatory-matrix.adoc`
- Signatory approval template (for esig workflow)

---

== CHAPTER 7: PM CHECKLIST TEMPLATE
**Status:** [ ] TODO +
**Priority:** Concurrent with ECO_PROCESS +
**Owner:** Robert A. James (PM)

.What this chapter covers:
- PM review criteria for ECR approval/rejection
- Checklist template (customizable)
- Scoring or pass/fail criteria
- Scope assessment
- Resource feasibility
- Risk analysis
- Alignment with product roadmap
- Documentation completeness

.Checklist Items (TBD - you fill in):
- [ ] ECR has theory file or documented justification
- [ ] Doesn't modify existing verified (*.thy) code
- [ ] [Your criterion #1]
- [ ] [Your criterion #2]
- [ ] [Your criterion #3]
- [ ] ...more to be defined...

.Key Sections:
- Checklist template (reusable)
- Scoring system (if applicable)
- Rejection reasons
- Approval process
- ECO creation workflow

.Tasks:
- [x] Create template structure
- [ ] YOU: Fill in specific PM criteria for StarForth
- [ ] Define scoring system (pass/fail or points)
- [ ] Document rejection communication template

.Dependencies:
- Chapter 2: ECO_PROCESS (used by)

.Output:
- `docs/src/governance/chapters/07-pm-checklist-template.adoc`

---

== CHAPTER 8: QA CHECKLIST TEMPLATE
**Status:** [ ] TODO +
**Priority:** Concurrent with CAPA_PROCESS +
**Owner:** Robert A. James (QA)

.What this chapter covers:
- QA review criteria for FMEA decision (not approval/rejection)
- Checklist for: "Does this CAPA require FMEA?"
- Risk criteria (critical code, security, architectural impact)
- Documentation requirements
- Test coverage assessment

.FMEA Decision Checklist (TBD - you fill in):
- [ ] Touches core VM code (interpreter, stacks)?
- [ ] Security vulnerability fix?
- [ ] Architectural change?
- [ ] Affects multiple subsystems?
- [ ] [Your criterion #1]
- [ ] [Your criterion #2]
- [ ] ...more to be defined...

.Key Sections:
- FMEA decision logic
- Risk assessment criteria
- Checklist template
- Decision documentation

.Tasks:
- [x] Create template structure
- [ ] YOU: Fill in QA criteria for FMEA requirement
- [ ] Define risk scoring
- [ ] Create decision documentation template

.Dependencies:
- Chapter 3: CAPA_PROCESS (used by)
- Chapter 4: FMEA_PROCESS (triggers)

.Output:
- `docs/src/governance/chapters/08-qa-checklist-template.adoc`

---

== CHAPTER 9: THEORY JUSTIFICATION GUIDE
**Status:** [ ] TODO +
**Priority:** After ECR_PROCESS +
**Owner:** Robert A. James (PM)

.What this chapter covers:
- When *.thy file is required for ECR
- What "documented justification" means
- Types of new features (by risk/complexity)
- Examples of valid justifications
- Examples of invalid/incomplete justifications
- How to create minimal *.thy file

.Key Rules:
. **NEW, standalone code** → Provide either:
  * A *.thy file (Isabelle/HOL theory, even minimal), OR
  * Documented justification of why theory proof isn't required
+
. **Modifies existing verified code** → **AUTO REJECT**
  * Cannot touch proven-correct code without updating proofs
  * This is a hard boundary (safety)

.Justification Examples:
- "This is purely external API, doesn't affect verified core"
- "Performance optimization with equivalent behavior (benchmarks attached)"
- "Documentation update only"
- "Test infrastructure, not production code"

.Tasks:
- [ ] Define justification criteria
- [ ] Create *.thy file example (minimal)
- [ ] Document when justification sufficient vs. full proof needed
- [ ] Create rejection criteria (modifying verified code)

.Dependencies:
- Chapter 1: ECR_PROCESS (used by)
- Isabelle/HOL theory files (docs/src/internal/formal/)

.Output:
- `docs/src/governance/chapters/09-theory-justification-guide.adoc`

---

== WORKFLOW DIAGRAMS

.ECR → ECO → Backlog Workflow
[source]
----
ECR Submitted (form complete)
  ├─ Has theory file OR justification? ✓
  ├─ Doesn't touch verified code? ✓
  └─ PM reviews (checklist in Chapter 7)
       ├─ REJECT → Close with explanation
       └─ APPROVE
            ├─ FMEA needed? (rare for ECO)
            │  ├─ NO → Create ECO-#, add to backlog
            │  └─ YES → Conduct FMEA-#, create ECO-#, add to backlog
            └─ [ECO now in developer backlog]
----

.CAPA → FMEA Decision → Release Workflow
[source]
----
Implementation discovers defect
  ↓
Developer creates CAPA issue (#123)
  ├─ PR references: "Closes #123"
  └─ GitHub Actions validates (devL → test → qual)
       ↓
       Tests pass → PR merged
       ↓
       QA reviews CAPA (checklist in Chapter 8)
       ├─ FMEA needed? (risk assessment)
       │  ├─ NO → QA approves, → PM gate
       │  └─ YES → Conduct FMEA-#, QA approves, → PM gate
       └─ QA comment: "✅ QA Approved" or "FMEA-#001 required"
            ↓
            PM reviews & decides: Release?
            ├─ HOLD → Wait for other CAPAs
            └─ APPROVE → Trigger Jenkins prod
                 ↓
                 Jenkins prod runs
                 ├─ Tags: v2.0.1
                 ├─ Merges: prod → master
                 └─ Archives artifacts
                      ↓
                      CAPA closed, released
----

---

== SESSION CONTINUITY & CHECKPOINTS

.How to restart after session interruption:

1. **Check This Document** → Find sections marked [ ] TODO
2. **Identify NEXT UP** → Red tags mark what's next
3. **Read Dependencies** → See what chapters are prerequisites
4. **Review Examples** → Each chapter has worked examples
5. **Update Status** → Mark [x] DONE when complete

.Current Checkpoint (Session Start):
- [x] Master reference manual structure created
- [ ] ECR_PROCESS chapter (NEXT UP)
- [ ] ECO_PROCESS chapter
- [ ] CAPA_PROCESS chapter
- [ ] FMEA_PROCESS chapter
- [ ] CROSS_REFERENCE_GUIDE chapter
- [ ] SIGNATORY_MATRIX chapter
- [ ] PM_CHECKLIST_TEMPLATE (concurrent with ECO)
- [ ] QA_CHECKLIST_TEMPLATE (concurrent with CAPA)
- [ ] THEORY_JUSTIFICATION_GUIDE chapter
- [ ] All chapters linked and cross-referenced
- [ ] Ready for governance bundle

---

== DOCUMENT LOCATION & MANAGEMENT

.File Structure:
[source]
----
docs/src/governance/
├── GOVERNANCE_REFERENCE_MANUAL.adoc (THIS FILE - master document)
├── chapters/
│   ├── 01-ecr-process.adoc          [ ] TODO
│   ├── 02-eco-process.adoc          [ ] TODO
│   ├── 03-capa-process.adoc         [ ] TODO
│   ├── 04-fmea-process.adoc         [ ] TODO
│   ├── 05-cross-reference-guide.adoc [ ] TODO
│   ├── 06-signatory-matrix.adoc     [ ] TODO
│   ├── 07-pm-checklist-template.adoc [ ] TODO
│   ├── 08-qa-checklist-template.adoc [ ] TODO
│   └── 09-theory-justification-guide.adoc [ ] TODO
├── templates/
│   ├── ecr-form-template.yml        [ ] TODO (GitHub issue form)
│   ├── eco-template.txt             [ ] TODO
│   ├── capa-template.txt            [ ] TODO
│   └── fmea-template.txt            [ ] TODO
├── examples/
│   ├── example-ecr-42.txt           [ ] TODO
│   ├── example-eco-15.txt           [ ] TODO
│   ├── example-capa-42.txt          [ ] TODO
│   └── example-fmea-01.txt          [ ] TODO
└── registry/
    └── controlled-documents-registry.csv [ ] TODO
----

---

== BUILD & DOCUMENTATION

.Generate HTML/PDF:
[source,bash]
----
# From project root
asciidoctor docs/src/governance/GOVERNANCE_REFERENCE_MANUAL.adoc \
  -o docs/build/governance-reference-manual.html

# Or full book format
asciidoctor-pdf docs/src/governance/GOVERNANCE_REFERENCE_MANUAL.adoc \
  -o docs/build/governance-reference-manual.pdf
----

---

== RELATED DOCUMENTS

- CAPA_PROCESS.md (converted to AsciiDoc in Chapter 3)
- PR_WORKFLOW.md (how PRs reference CAPAs)
- BRANCH_PROTECTION_GUIDE.md (GitHub rules)
- GITHUB_ACTIONS_SETUP.md (workflow details)

---

== APPROVAL & SIGN-OFF (Future)

.When completed and ready for governance repo:

[%header,cols="1,1,1"]
|===
| Role | Name | esig Date

| PM/Author | Robert A. James | [ ] TBD
| QA Review | (TBD) | [ ] TBD
| Engineering Manager | (TBD - future) | [ ] TBD
|===

[NOTE]
====
esig workflow and approval process (shell script) deferred for later discussion.
====

---

== NEXT SESSION: START HERE

[IMPORTANT]
====
**NEXT UP:** Create ECR_PROCESS.adoc (Chapter 1)

This is the entry point for the governance system. It defines:
- How new features are submitted (ECR form)
- What must be included (theory file or justification)
- PM review gate

**Then proceed:** ECO_PROCESS → CAPA_PROCESS → FMEA_PROCESS → Cross-Reference → Signatory Matrix → Checklists → Theory Guide

====

---

**Document Version:** 1.0
**Created:** October 30, 2025
**Status:** Framework complete, chapters pending

== Approvals & Signature

[cols="2,3,2,2", options="header"]
|===
| Role | Name | Date | Signature
| Product Manager | Robert A. James | ________ | ________________
| QA Lead | [Name or N/A] | ________ | ________________
| Governance | [Name or N/A] | ________ | ________________
|===

**Status:** [SIGNATURE REQUIRED]
**Instructions:** Enter today's date and your esignature in the "Signature" column.
Format: `/s/ Robert A. James` or your handwritten signature if printed.

